<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>IFE JavaScript Task 04</title>
    <style type="text/css">
        span {
            display: inline-block;
            width: 50px;
            height: 50px;
            margin: 5px;
            background-color: aquamarine;
            text-align: center;
            line-height: 50px;
        }
    </style>
</head>
<body>

    <label><input id="input-text" type="text"></label>
    <button id="left-in">左侧入</button>
    <button id="right-in">右侧入</button>
    <button id="left-out">左侧出</button>
    <button id="right-out">右测出</button>
    <div id="spanBox"></div>
    <script type="text/javascript">
        (function () {

            var left_in = document.getElementById("left-in");
            var right_in = document.getElementById("right-in");
            var left_out = document.getElementById("left-out");
            var right_out = document.getElementById("right-out");
            var reg = /^[0-9]+\.?[0-9]*$/;
            span_box = document.getElementById("spanBox");
            input_text = document.getElementById("input-text");

            left_in.onclick = function () {
                if(reg.test(input_text.value)){  // input check
                    add("left");
                }
                else{
                    alert("Please input number");
                }
            };

            right_in.onclick = function () {
                if(reg.test(input_text.value)){  // input check
                    add("right");
                }
                else{
                    alert("Please input number");
                }
            };

            left_out.onclick = function () {
                del("left");
            };

            right_out.onclick = function () {
                del("right");
            };

        })();

        /**
         *  create Span
         *  @param value
         */
        function createSpan(value) {
            var sp = document.createElement("span");
            sp.innerText = value;
            return sp;
        }

        /**
         * appendTo spanBox
         * @param type left or right
         */
        function add(type) {
            var sp = createSpan(input_text.value);
            if(type == "left"){
                span_box.insertBefore(sp,span_box.childNodes[0]);
            }
            else{
                span_box.appendChild(sp);
            }
            // span click event
            sp.onclick = function () {
                alert(this.innerText);
                span_box.removeChild(this);
            }
        }

        /**
         * delete Span
         * @param type left or right
         */
        function del(type) {
            if(type == "left"){
                alert(span_box.childNodes[0].innerText);
                span_box.removeChild(span_box.childNodes[0])
            }
            else {
                alert(span_box.lastChild.innerText);
                span_box.removeChild(span_box.lastChild)
            }
        }
        
    </script>
</body>
</html>